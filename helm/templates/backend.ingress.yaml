apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
  name: clusterchess-backend-ig
  namespace: clusterchess-backend
spec:
  entryPoints:
    - websecure
  tls:
    secretName: clusterchess-backend-tls
  routes:
    - match: Host(`api.clusterchess.fdero.com`)
      kind: Rule
      middlewares:
        - name: backend-http-https-redirect
      services:
        - name: clusterchess-backend-sv
          port: 80
          sticky:
            cookie:
              name: clusterchess-backend-sticky
              secure: true
              httpOnly: true
              sameSite: lax